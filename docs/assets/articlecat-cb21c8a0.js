import{q as c,_ as A,d as E,s as I,o as v,c as N,a as m,b as t,w as l,F as T,e as F,K as P,E as u,f as $,g as L,h as U,i as B,j as i,k as W,l as z,m as q,L as O,M as D,n as M}from"./index-88a35129.js";/* empty css                       *//* empty css                  */const j=e=>c.request({url:"api/articleCat/add",method:"post",data:e}),R=()=>c.request({url:"api/articleCat/all",method:"get"}),K=e=>c.request({url:"api/articleCat/delete",method:"get",params:e}),G=e=>c.request({url:"api/articleCat/edit",method:"post",data:e}),H=E({data(){return{articleCats:[],page:{records:[],total:0,current:1,size:10},dialogFormVisible:!1,articleCat:{catName:"",createTime:"",deleted:0,id:0,parentId:0,showInNav:!0,sortOrder:0,updateTime:""},formLabelWidth:98}},mounted(){this.getArticleCatsPage(1)},methods:{enterarticle(){console.log("进入文章内容管理"),this.$router.push({path:"/article"})},enterlogin(){console.log("进入登录界面"),this.$router.push({path:"/login"})},toEdit(e){this.dialogFormVisible=!0,this.articleCat=F(e)},getArticleCatsPage(e){R().then(a=>{const n=a.data.articleCats;this.articleCats=n,this.page=n}).catch(a=>{console.log(a)})},currentchange(e){this.getArticleCatsPage(e),this.page.current=e},del(e){P.confirm("确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{K({id:e}).then(n=>{if(n.success){const h=this.articleCats.findIndex(g=>g.id===e);this.articleCats.splice(h,1),this.page.total--,this.articleCats.length===0&&this.page.current>1?this.currentchange(this.page.current-1):this.getArticleCatsPage(this.page.current)}else return console.log(n.msg),!1}).catch(n=>{})}).catch(()=>{})},toAdd(){this.dialogFormVisible=!0,this.resetArticleCat()},save(){const e=this.articleCat;e.id==0?j(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getArticleCatsPage(this.page.current),u(a.msg),this.resetArticleCat();else return u(a.msg),!1}).catch(a=>{u("网络错误联系管理员")}):G(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getArticleCatsPage(this.page.current),u(a.msg),this.resetArticleCat();else return u(a.msg),!1}).catch(a=>{u("网络错误联系管理员")})},resetArticleCat(){this.articleCat={catName:"",createTime:"",deleted:0,id:0,parentId:0,showInNav:!0,sortOrder:0,updateTime:""}}}}),J={class:"articleCats"},Q={class:"article-tools"},S={class:"dialog-footer"};function X(e,a,n,h,g,Y){const s=$,b=I("router-link"),r=W,w=L,V=U,p=z,d=q,f=O,C=D,k=M,_=B;return v(),N(T,null,[m("div",J,[m("div",Q,[t(s,{type:"warning",onClick:e.toAdd},{default:l(()=>[i("添加")]),_:1},8,["onClick"]),t(s,{type:"warning",onClick:e.enterarticle},{default:l(()=>[i("文章内容管理")]),_:1},8,["onClick"]),t(s,{type:"warning"},{default:l(()=>[t(b,{to:"/shuju",style:{"text-decoration":"none",color:"aliceblue"}},{default:l(()=>[i("用户界面")]),_:1})]),_:1}),t(s,{type:"warning",onClick:e.enterlogin,style:{float:"right"}},{default:l(()=>[i("重新登陆")]),_:1},8,["onClick"])]),t(w,{data:e.articleCats,style:{width:"100%"}},{default:l(()=>[t(r,{fixed:"",prop:"id",label:"分类id",width:"120"}),t(r,{prop:"catName",label:"类别名称",width:"120"}),t(r,{prop:"parentId",label:"夫级id",width:"120"}),t(r,{prop:"showInNav",label:"是否导航显示",width:"120"}),t(r,{prop:"sortOrder",label:"排序",width:"120"}),t(r,{prop:"createTime",label:"创建时间",width:"120"}),t(r,{prop:"updateTime",label:"更新时间",width:"120"}),t(r,{prop:"deleted",label:"删除",width:"120"}),t(r,{fixed:"right",label:"操作",width:"120"},{default:l(o=>[t(s,{link:"",type:"primary",size:"small",onClick:y=>e.toEdit(o.row)},{default:l(()=>[i("更新")]),_:2},1032,["onClick"]),t(s,{link:"",type:"primary",size:"small",onClick:y=>e.del(o.row.id)},{default:l(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(V,{layout:"prev, pager, next","page-size":e.page.size,total:parseInt(e.page.total),onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),t(_,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[8]||(a[8]=o=>e.dialogFormVisible=o),title:"新增文章类型"},{footer:l(()=>[m("span",S,[t(s,{onClick:a[7]||(a[7]=o=>e.dialogFormVisible=!1)},{default:l(()=>[i("取消")]),_:1}),t(s,{type:"primary",onClick:e.save},{default:l(()=>[i("保存")]),_:1},8,["onClick"])])]),default:l(()=>[t(k,{model:e.articleCat},{default:l(()=>[t(d,{label:"类别名称","label-width":e.formLabelWidth},{default:l(()=>[t(p,{modelValue:e.articleCat.catName,"onUpdate:modelValue":a[0]||(a[0]=o=>e.articleCat.catName=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"夫级id","label-width":e.formLabelWidth},{default:l(()=>[t(p,{modelValue:e.articleCat.parentId,"onUpdate:modelValue":a[1]||(a[1]=o=>e.articleCat.parentId=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"是否导航显示","label-width":e.formLabelWidth},{default:l(()=>[t(f,{modelValue:e.articleCat.showInNav,"onUpdate:modelValue":a[2]||(a[2]=o=>e.articleCat.showInNav=o),label:"true"},{default:l(()=>[i("true")]),_:1},8,["modelValue"]),t(f,{modelValue:e.articleCat.showInNav,"onUpdate:modelValue":a[3]||(a[3]=o=>e.articleCat.showInNav=o),label:"false"},{default:l(()=>[i("false")]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"排序","label-width":e.formLabelWidth},{default:l(()=>[t(p,{modelValue:e.articleCat.sortOrder,"onUpdate:modelValue":a[4]||(a[4]=o=>e.articleCat.sortOrder=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"创建时间","label-width":e.formLabelWidth},{default:l(()=>[t(C,{modelValue:e.articleCat.createTime,"onUpdate:modelValue":a[5]||(a[5]=o=>e.articleCat.createTime=o),type:"date",autocomplete:"off",placeholder:"选择日期"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"更新时间","label-width":e.formLabelWidth},{default:l(()=>[t(C,{modelValue:e.articleCat.updateTime,"onUpdate:modelValue":a[6]||(a[6]=o=>e.articleCat.updateTime=o),type:"date",autocomplete:"off",placeholder:"选择日期"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const te=A(H,[["render",X]]);export{te as default};
